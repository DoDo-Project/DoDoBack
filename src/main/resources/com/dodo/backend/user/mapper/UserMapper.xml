<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- 사용자(User) 도메인의 복잡한 조회 및 동적 쿼리를 담당하는 MyBatis Mapper XML입니다. -->
<mapper namespace="com.dodo.backend.user.mapper.UserMapper">

    <!-- 신규 가입 유저의 추가 정보를 업데이트하고 계정 상태를 'ACTIVE'로 전환합니다.
         1. nickname : 서비스에서 사용할 유저의 별명
         2. region : 유저의 활동 지역 정보
         3. has_family : 가족 여부
         4. user_status : 가입 완료를 의미하는 'ACTIVE' 상태로 변경
         5. WHERE email : 토큰에서 추출한 이메일을 기준으로 특정 유저를 식별-->
    <update id="updateUserRegistrationInfo" parameterType="com.dodo.backend.user.entity.User">
        UPDATE users
        SET nickname = #{nickname},
            region = #{region},
            has_family = #{hasFamily},
            user_status = 'ACTIVE'
        WHERE email = #{email}
    </update>
</mapper>