<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DODO | Auth Result</title>
    <style>
        body {
            font-family: 'Pretendard', sans-serif;
            background: linear-gradient(135deg, #f6d365 0%, #fda085 100%);
            padding: 40px 20px; color: #333; margin: 0; min-height: 100vh;
            display: flex; justify-content: center; align-items: flex-start;
        }
        .container {
            width: 100%; max-width: 700px;
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(20px);
            padding: 40px; border-radius: 32px;
            box-shadow: 0 25px 50px rgba(0,0,0,0.15);
        }
        .header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 30px; border-bottom: 1px solid rgba(0,0,0,0.05); padding-bottom: 20px; }
        .header h1 { margin: 0; font-size: 24px; font-weight: 800; color: #ff6b35; }

        .badge { padding: 8px 16px; border-radius: 12px; font-size: 12px; font-weight: 700; }
        .success { background: #03c75a; color: #fff; }
        .register { background: #ff922b; color: #fff; }
        .error { background: #fa5252; color: #fff; }

        .card { background: rgba(255, 255, 255, 0.5); border-radius: 20px; padding: 25px; border: 1px solid rgba(255,255,255,0.6); margin-top: 15px; }
        .label { display: block; font-size: 11px; font-weight: 700; color: #888; margin-bottom: 6px; text-transform: uppercase; }
        .value {
            display: block; background: #fff; padding: 12px; border-radius: 12px;
            border: 1px solid rgba(0,0,0,0.05); font-family: 'JetBrains Mono', monospace;
            font-size: 14px; word-break: break-all; margin-bottom: 15px;
        }
        .token { background: #2d3436; color: #ffeaa7; font-weight: 500; }

        .guide { margin-top: 25px; padding: 15px; background: rgba(25, 113, 194, 0.1); border-radius: 12px; color: #1971c2; font-size: 14px; border: 1px solid rgba(25, 113, 194, 0.1); }
        .back-btn { display: inline-block; margin-top: 30px; color: #777; text-decoration: none; font-size: 14px; font-weight: 500; }
        .back-btn:hover { color: #ff6b35; }
    </style>
</head>
<body>
<div class="container">
    <div class="header">
        <h1>DODO AUTH</h1>
        <span th:if="${error}" class="badge error">Failure</span>
        <span th:if="${type == 'LOGIN_SUCCESS'}" class="badge success">Active Member</span>
        <span th:if="${type == 'REGISTER_NEEDED'}" class="badge register">New Member</span>
    </div>

    <div th:if="${error}" class="card">
        <span class="label">Error Details</span>
        <span class="value" th:text="${error}"></span>
    </div>

    <div th:if="${type == 'LOGIN_SUCCESS'}">
        <p style="font-weight: 600;">✨ 로그인을 환영합니다!</p>
        <div class="card">
            <span class="label">Status</span>
            <span class="value" th:text="${result.message}"></span>
            <span class="label">Access Token</span>
            <span class="value token" th:text="${result.accessToken}"></span>
            <span class="label">Refresh Token</span>
            <span class="value" th:text="${result.refreshToken}"></span>
        </div>
    </div>

    <div th:if="${type == 'REGISTER_NEEDED'}">
        <p style="font-weight: 600;">가입을 완료해 주세요.</p>
        <div class="card">
            <span class="label">User</span>
            <span class="value" th:text="|${result.name} (${result.email})|"></span>
            <span class="label">Registration Token</span>
            <span class="value token" th:text="${result.registrationToken}"></span>
        </div>
        <div class="guide">
            <b>Next Step:</b> <code>PUT /users/me/profile</code> 호출 시 토큰을 지참하세요.
        </div>
    </div>

    <a href="/view/login" class="back-btn">← 처음으로 돌아가기</a>
</div>
</body>
</html>